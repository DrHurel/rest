<mat-toolbar color="primary">
  <button mat-icon-button aria-label="Menu">
    <mat-icon>menu</mat-icon>
  </button>
  <span>Booking.com</span>
  <span class="flex-1"></span>
  <button mat-icon-button aria-label="Favorites">
    <mat-icon>favorite</mat-icon>
  </button>
  <button mat-icon-button aria-label="Share">
    <mat-icon>share</mat-icon>
  </button>
</mat-toolbar>

<section class="p-6 bg-gray-100">
  <form [formGroup]="searchForm" (ngSubmit)="search()" class="flex flex-wrap gap-4 items-center justify-center">
    <mat-form-field appearance="outline">
      <mat-label>Search Rooms</mat-label>
      <input matInput placeholder="Enter room name" formControlName="search">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Beds</mat-label>
      <mat-select formControlName="beds">
        <mat-option [value]="1">1 Bed</mat-option>
        <mat-option [value]="2">2 Beds</mat-option>
        <mat-option [value]="3">3 Beds</mat-option>
        <mat-option [value]="4">4+ Beds</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Check-in</mat-label>
      <input matInput [matDatepicker]="checkinPicker" formControlName="checkin">
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="checkinPicker"></mat-datepicker-toggle>
      <mat-datepicker #checkinPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Check-out</mat-label>
      <input matInput [matDatepicker]="checkoutPicker" formControlName="checkout">
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="checkoutPicker"></mat-datepicker-toggle>
      <mat-datepicker #checkoutPicker></mat-datepicker>
    </mat-form-field>

    <button mat-raised-button color="primary" type="submit" [disabled]="isLoading()">
      <mat-icon>search</mat-icon>
      Search
    </button>
  </form>
</section>

<main class="p-6">
  @if (isLoading()) {
    <div class="flex justify-center items-center p-8">
      <mat-spinner></mat-spinner>
    </div>
  } @else if (error) {
    <mat-card class="max-w-md mx-auto">
      <mat-card-content class="flex items-center gap-2 text-red-600">
        <mat-icon>error</mat-icon>
        {{ error }}
      </mat-card-content>
    </mat-card>
  } @else if (rooms().length === 0) {
    <mat-card class="max-w-md mx-auto">
      <mat-card-content class="flex items-center gap-2 text-gray-600">
        <mat-icon>search_off</mat-icon>
        No rooms found matching your criteria
      </mat-card-content>
    </mat-card>
  } @else {
    <mat-grid-list [cols]="cols" rowHeight="500px" gutterSize="16" >
      @for (room of rooms(); track room.id) {
        <mat-grid-tile>
          <mat-card class="w-full max-w-sm m-2">
            <img mat-card-image [src]="'assets/rooms/' + room.id + '.jpg'" [alt]="room.name" 
                 class="h-48 w-full object-cover">
            <mat-card-header>
              <mat-card-title>{{room.name}}</mat-card-title>
              <mat-card-subtitle>{{room.size}}mÂ² with {{room.beds}} beds</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <div class="text-right mt-4">
                <span class="text-2xl font-bold text-blue-600">${{room.price}}</span>
                <span class="text-sm text-gray-600 ml-1">per night</span>
              </div>
            </mat-card-content>
            <mat-card-actions class="flex justify-between p-4">
              <button mat-button color="accent">
                <mat-icon>favorite_border</mat-icon> SAVE
              </button>
              <button mat-raised-button color="primary">
                <mat-icon>book_online</mat-icon> BOOK NOW
              </button>
            </mat-card-actions>
          </mat-card>
        </mat-grid-tile>
      }
    </mat-grid-list>
  }
</main>

<mat-paginator
  [length]="totalRooms()"
  [pageSize]="pageSize"
  [pageSizeOptions]="[8, 16, 24, 32]"
  (page)="onPageChange($event)"
  aria-label="Select page">
</mat-paginator>